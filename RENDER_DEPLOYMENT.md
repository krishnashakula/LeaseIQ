# Render Deployment Guide

## ğŸš€ Quick Deploy to Render

### Prerequisites
- GitHub account with repository
- Render account (free tier available)

### Step 1: Prepare Repository
```bash
# Initialize git repository (if not already done)
git init

# Add all files
git add .

# Commit changes
git commit -m "Prepare for Render deployment"

# Push to GitHub
git remote add origin YOUR_GITHUB_REPO_URL
git push -u origin main
```

### Step 2: Deploy to Render

#### Option A: Using render.yaml (Recommended)
1. Go to [Render Dashboard](https://dashboard.render.com)
2. Click **New** â†’ **Blueprint**
3. Connect your GitHub repository
4. Render will automatically detect `render.yaml`
5. Click **Apply** to deploy both services

#### Option B: Manual Setup
1. **Backend Service:**
   - Click **New** â†’ **Web Service**
   - Connect repository
   - Settings:
     - Name: `lease-intelligence-backend`
     - Environment: `Python 3`
     - Build Command: `cd backend && pip install -r requirements.txt`
     - Start Command: `cd backend && gunicorn --bind 0.0.0.0:$PORT --workers 2 --threads 4 --timeout 120 app:app`
     - Plan: `Starter` (free)
     - Health Check Path: `/health`

2. **Frontend Service:**
   - Click **New** â†’ **Static Site**
   - Connect repository
   - Settings:
     - Name: `lease-intelligence-frontend`
     - Publish Directory: `./frontend`
     - Add rewrite rule: `/api/*` â†’ `https://lease-intelligence-backend.onrender.com/api/*`

### Step 3: Environment Variables

Set these in Render Dashboard â†’ Backend Service â†’ Environment:

```env
FLASK_ENV=production
SECRET_KEY=<auto-generated by Render>
MAX_CONTENT_LENGTH=52428800
CORS_ORIGINS=*
LOG_LEVEL=INFO
SECURE_HEADERS=true
```

### Step 4: Configure Storage

Backend Service â†’ Disks:
- Name: `uploads-data`
- Mount Path: `/opt/render/project/src/backend/uploads`
- Size: 1 GB

### Step 5: Update Frontend API URL

After backend is deployed, update `frontend/index.html`:
```javascript
// Replace localhost with your backend URL
const API_URL = 'https://lease-intelligence-backend.onrender.com';
```

## ğŸ“Š Service URLs

After deployment:
- **Backend**: `https://lease-intelligence-backend.onrender.com`
- **Frontend**: `https://lease-intelligence-frontend.onrender.com`
- **Health Check**: `https://lease-intelligence-backend.onrender.com/health`

## ğŸ”§ Configuration Details

### Backend (render.yaml)
```yaml
- Workers: 2
- Threads per worker: 4
- Timeout: 120 seconds
- Port: Auto-assigned by Render ($PORT)
- Health Check: /health endpoint
- Disk Mount: 1GB for uploads
```

### Frontend (Static Site)
```yaml
- Type: Static Site
- Security Headers: X-Frame-Options, X-Content-Type-Options
- API Proxy: Routes /api/* to backend
```

## ğŸ› Troubleshooting

### Backend won't start
1. Check logs in Render Dashboard
2. Verify all dependencies in requirements.txt
3. Ensure `runtime.txt` matches Python version (3.11.0)

### Frontend can't connect to backend
1. Check CORS_ORIGINS environment variable
2. Update API_URL in frontend/index.html
3. Verify backend health check: `curl https://YOUR-BACKEND.onrender.com/health`

### File uploads fail
1. Ensure disk mount is configured
2. Check MAX_CONTENT_LENGTH (default: 50MB)
3. Verify uploads directory permissions

### Logs and Monitoring
```bash
# View logs in Render Dashboard
# Or use Render CLI
render logs -s lease-intelligence-backend
render logs -s lease-intelligence-frontend
```

## ğŸ”„ Updates and Redeployment

### Auto-deploy (Recommended)
- Enable "Auto-Deploy" in Render Dashboard
- Push to main branch triggers automatic deployment

### Manual deploy
```bash
# In Render Dashboard
1. Go to service
2. Click "Manual Deploy" â†’ "Deploy latest commit"
```

## ğŸ’¡ Performance Tips

1. **Upgrade Plan**: Consider upgrading from free tier for:
   - Faster cold starts
   - More consistent performance
   - Increased storage

2. **Caching**: Enable if available in your plan

3. **Database**: Add PostgreSQL for production data persistence

4. **CDN**: Use Render's CDN for frontend static assets

## ğŸ”’ Security Checklist

- âœ… SECRET_KEY generated automatically
- âœ… CORS configured properly
- âœ… Security headers enabled
- âœ… HTTPS enforced by Render
- âœ… Input validation active
- âœ… File size limits enforced
- âœ… .env excluded from deployment

## ğŸ“ˆ Monitoring

Render provides:
- CPU usage metrics
- Memory usage
- Request rates
- Error rates
- Health check status

Access via: Dashboard â†’ Service â†’ Metrics

## ğŸ†˜ Support

- [Render Documentation](https://render.com/docs)
- [Render Status Page](https://status.render.com)
- [Community Forum](https://community.render.com)

## âœ… Deployment Checklist

Before deploying:
- [ ] Code pushed to GitHub
- [ ] render.yaml configured
- [ ] requirements.txt complete
- [ ] Environment variables set
- [ ] Disk mount configured (backend)
- [ ] Health check endpoint working
- [ ] Frontend API_URL updated
- [ ] Security headers configured
- [ ] .renderignore created

After deployment:
- [ ] Backend health check returns 200
- [ ] Frontend loads correctly
- [ ] File upload works
- [ ] PDF analysis completes
- [ ] Results display properly
- [ ] Check logs for errors
- [ ] Test all API endpoints
- [ ] Verify CORS working

## ğŸ‰ Post-Deployment

Your application is now live!
- Share the frontend URL with users
- Monitor performance and logs
- Set up custom domain (optional)
- Configure alerts (optional)
